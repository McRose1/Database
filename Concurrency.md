# 数据库的并发
许多事务对同一数据进行操作

## 带来的问题
- 丢失更新
- 读脏数据
- 死锁（不可重复读）

## 解决方法
封锁技术

## 并发策略
并发控制一般采用三种方法，分别是：
- 乐观锁
- 悲观锁
- 时间戳

### 乐观锁
乐观锁认为一个用户读数据的时候，别人不会去写自己所读的数据

### 悲观锁
悲观锁认为自己读数据库的时候，别人可能刚好在写自己刚读的数据。

所以采用在读取数据的时候，为了不让别人修改自己读取的数据，就会先对自己读取的数据加锁，只有自己把数据读完了，才允许别人修改那部分数据。

或者反过来说，就是**自己修改某条数据的时候，不允许别人读取该数据**，只有等自己的整个事务提交了，才释放自己加上的锁，才允许其他用户访问那部分数据。

### 时间戳
时间戳就是不加锁，通过时间戳来控制并发出现的问题。

也就是在数据库表中单独加一列时间戳，比如“TimeStamp”，**每次读出来的时候，把该字段也读出来，当写回去的时候，把该字段加 1，提交之前，跟数据库的该字段比较一次，如果比数据库的值大的话，就允许保存，否则不允许保存**，这种处理方法虽然不使用数据库系统提供的锁机制，但是可以大大提高数据库处理的并发量。






















